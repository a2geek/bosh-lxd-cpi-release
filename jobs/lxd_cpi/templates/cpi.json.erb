<%=

config = {
  "Server" => {
    "Type" => p("lxd_cpi.server.type"),
    "URL" => p("lxd_cpi.server.url"),
    "InsecureSkipVerify" => p("lxd_cpi.server.insecure_skip_verify"),
    "TLSClientCert" => p("lxd_cpi.server.tls_client_cert"),
    "TLSClientKey" => p("lxd_cpi.server.tls_client_key"),
    "Project" => p("lxd_cpi.server.project_name"),
    "Profile" => p("lxd_cpi.server.profile_name"),
    "Network" => p("lxd_cpi.server.network_name"),
    "StoragePool" => p("lxd_cpi.server.storage_pool_name"),
    "BIOSPath" => p("lxd_cpi.server.bios_path")
  },
  "Agent" => {
    "Mbus" => p("lxd_cpi.agent.mbus"),
    "NTP"  => p("lxd_cpi.agent.ntp"),
  },
  "AgentConfig" => {
    "SourceType" => p("lxd_cpi.agent_config.type"),
    "Label" => p("lxd_cpi.agent_config.label"),
    "MetadataPath" => p("lxd_cpi.agent_config.metadata_path"),
    "UserdataPath" => p("lxd_cpi.agent_config.userdata_path"),
    "FileStorePath" => p("lxd_cpi.agent_config.filestore_path")
  },
  "ThrottleConfig" => {
    "Enabled" => p("lxd_cpi.throttle_config.enabled"),
    "Path" => p("lxd_cpi.throttle_config.path"),
    "Limit" => p("lxd_cpi.throttle_config.limit").to_i,
    "Hold" => p("lxd_cpi.throttle_config.hold"),
  }
}

JSON.dump(config)

%>
